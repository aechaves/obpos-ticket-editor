{
  "url": "https://www.freeformatter.com/json-escape.html",
  "tutorial": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<output>\r\n  <ticket>\r\n   <line>\r\n      <text align=\"center\">\r\n        How to use\r\n      <\/text>\r\n      <line>\r\n        <text align=\"center\">------------------------------------------<\/text>\r\n      <\/line>\r\n      <text align=\"center\">\r\n        1. Click on the configuration button\r\n      <\/text>\r\n      <line>\r\n        <text align=\"center\">------------------------------------------<\/text>\r\n      <\/line>\r\n      <text align=\"center\">\r\n        2. Load the Web POS module labels, using the AD_MESSAGE.xml file\r\n      <\/text>\r\n      <line>\r\n        <text align=\"center\">------------------------------------------<\/text>\r\n      <\/line>\r\n      <text align=\"center\">\r\n        3. Optionally load a translation file from a translation module\r\n      <\/text>\r\n      <line>\r\n        <text align=\"center\">------------------------------------------<\/text>\r\n      <\/line>\r\n      <text align=\"center\">\r\n        4. Load a JSON file containing a ticket data.\r\n        You can obtain this from the WebPOS local database\r\n        Or from the Data Import Entry (Archive) window(s)\r\n      <\/text>\r\n      <line>\r\n        <text align=\"center\">------------------------------------------<\/text>\r\n      <\/line>\r\n      <text align=\"center\">\r\n        5. Paste into this editor your ticket's xml\r\n      <\/text>\r\n      <line>\r\n        <text align=\"center\">------------------------------------------<\/text>\r\n      <\/line>\r\n      <text align=\"center\">\r\n        6. Edit your ticket freely, rendering is updated automatically\r\n      <\/text>\r\n      <line>\r\n        <text align=\"center\">------------------------------------------<\/text>\r\n      <\/line>\r\n      <text align=\"center\">\r\n        7. By printing the page you can obtain a PDF of the ticket to send to someone else\r\n      <\/text>\r\n      <line>\r\n        <text align=\"center\">------------------------------------------<\/text>\r\n      <\/line>\r\n      <text align=\"center\">\r\n          Check Openbravo's wiki to know how to build a ticket\r\n      <\/text>\r\n    <\/line>\r\n  <\/ticket>\r\n<\/output>",
  "example": "<output>\r\n  <ticket>\r\n    <line>\r\n      <image>ticket-image.png<\/image>\r\n    <\/line>\r\n    <line><\/line>\r\n    <line>\r\n      <text align=\"center\" length=\"42\">\r\n        <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_tckheader_line1'))%>\r\n      <\/text>\r\n    <\/line>\r\n    <line>\r\n      <text align=\"center\" length=\"42\">\r\n        <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_tckheader_line2'))%>\r\n      <\/text>\r\n    <\/line>\r\n    <line><\/line>\r\n    <line>\r\n      <text align=\"left\" length=\"22\">\r\n        <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_ToInvoice')) %>\r\n      <\/text>\r\n      <text>\r\n        <%= OB.UTIL.encodeXMLComponent(ticket.documentNo) %>\r\n      <\/text>\r\n    <\/line>\r\n    <line>\r\n      <text align=\"left\" length=\"22\">\r\n        <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_datetime')) %>\r\n      <\/text>\r\n      <text>\r\n        <%= OB.I18N.formatDate(ticket.orderDate) %>\r\n      <\/text>\r\n      <text> <\/text>\r\n      <% const ticketTime=ticket.creationDate !=null ? new Date(ticket.creationDate) : new Date(); %>\r\n        <text>\r\n          <%= OB.I18N.formatHour(ticketTime) %>\r\n        <\/text>\r\n    <\/line>\r\n    <line>\r\n      <text align=\"left\" length=\"22\">\r\n        <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_cashierPOS')) %>\r\n      <\/text>\r\n      <text>\r\n        <%= OB.UTIL.encodeXMLComponent(ticket['salesRepresentative$_identifier']) %>\r\n      <\/text>\r\n      <text>, <\/text>\r\n      <text>\r\n        <%= OB.UTIL.encodeXMLComponent(ticket['posTerminal$_identifier']) %>\r\n      <\/text>\r\n    <\/line>\r\n    <line>\r\n      <text align=\"left\" length=\"22\">\r\n        <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_LblTaxId')) %>\r\n      <\/text>\r\n      <text>\r\n        <%= OB.UTIL.encodeXMLComponent(OB.App.TerminalProperty.get('terminal').organizationTaxId) %>\r\n      <\/text>\r\n    <\/line>\r\n    <line>\r\n      <text>\r\n        <%= OB.UTIL.encodeXMLComponent(OB.App.TerminalProperty.get('terminal').organizationAddressIdentifier) %>\r\n      <\/text>\r\n    <\/line>\r\n    <line><\/line>\r\n    <line size=\"1\">\r\n      <text align=\"center\" length=\"42\">\r\n        <%= OB.I18N.getLabel('OBPOS_ToInvoice') %>\r\n      <\/text>\r\n    <\/line>\r\n    <line><\/line>\r\n\r\n    <line>\r\n      <text align=\"left\" length=\"21\">\r\n        <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_LineItem')) %>\r\n      <\/text>\r\n      <text align=\"right\" length=\"5\">#<\/text>\r\n      <text align=\"right\" length=\"8\">\r\n        <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_LinePrice')) %>\r\n      <\/text>\r\n      <text align=\"right\" length=\"8\">\r\n        <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_LineTotal')) %>\r\n      <\/text>\r\n    <\/line>\r\n    <line>\r\n      <text>------------------------------------------<\/text>\r\n    <\/line>\r\n    <% ticket.lines.forEach(line=> {\r\n      %>\r\n      <line>\r\n        <text align=\"left\" length=\"21\">\r\n          <%= OB.UTIL.encodeXMLComponent(line.product._identifier) %>\r\n        <\/text>\r\n        <text align=\"right\" length=\"5\">\r\n          <%= OB.App.PrintUtils.printQty(line.qty) %>\r\n        <\/text>\r\n        <text align=\"right\" length=\"8\">\r\n          <%= OB.App.PrintUtils.printTicketLinePrice(line) %>\r\n        <\/text>\r\n        <text align=\"right\" length=\"8\">\r\n          <%= OB.App.PrintUtils.printTicketLineAmount(line) %>\r\n        <\/text>\r\n      <\/line>\r\n      <% if (line.promotions) { line.promotions.forEach(p=> {\r\n        if (!p.hidden) {\r\n        %>\r\n        <line>\r\n          <text align=\"left\" length=\"2\">--<\/text>\r\n          <text align=\"left\" length=\"32\">\r\n            <%= OB.UTIL.encodeXMLComponent(p.name) %>\r\n          <\/text>\r\n          <text align=\"right\" length=\"8\">\r\n            <%= OB.App.PrintUtils.printAmount(-p.amt) %>\r\n          <\/text>\r\n        <\/line>\r\n        <% } }); } }); %>\r\n          <% if(!ticket.priceIncludesTax) { %>\r\n            <line>\r\n              <text align=\"left\" length=\"21\">\r\n                <%= OB.I18N.getLabel('OBPOS_LblTotalTax') %>\r\n              <\/text>\r\n              <text align=\"right\" length=\"5\"><\/text>\r\n              <text align=\"right\" length=\"8\"><\/text>\r\n              <text align=\"right\" length=\"8\">\r\n                <%= OB.App.PrintUtils.printAmount(OB.DEC.sub(ticket.grossAmount, ticket.netAmount)) %>\r\n              <\/text>\r\n            <\/line>\r\n            <% } %>\r\n              <line><\/line>\r\n              <line size=\"1\">\r\n                <text align=\"left\" length=\"25\">\r\n                  <%= OB.I18N.getLabel('OBPOS_ReceiptTotal') + ' ' + ticket['currency$_identifier'] %>\r\n                <\/text>\r\n                <text align=\"right\" length=\"14\">\r\n                  <%= OB.App.PrintUtils.printAmount(ticket.grossAmount) %>\r\n                <\/text>\r\n              <\/line>\r\n              <% const payments=ticket.payments || []; payments.forEach(payment=> {\r\n                let paymentName = payment.name;\r\n                if (payment.paymentData && payment.paymentData.name && payment.paymentData.name.length > 0) {\r\n                paymentName = paymentName + ' (' + payment.paymentData.name + ')';\r\n                }\r\n                if (payment.rate && payment.rate !== '1') {\r\n                %>\r\n                <line>\r\n                  <text align=\"left\" length=\"15\">\r\n                    <%= paymentName %>\r\n                  <\/text>\r\n                  <text align=\"right\" length=\"12\">\r\n                    <%= '(' + OB.App.PrintUtils.printAmount(payment.amount) + ' ' + payment.isocode + ')' %>\r\n                  <\/text>\r\n                  <text align=\"right\" length=\"13\">\r\n                    <%= OB.App.PrintUtils.printAmount(payment.origAmount) %>\r\n                  <\/text>\r\n                <\/line>\r\n                <% } else { %>\r\n                  <line>\r\n                    <text align=\"left\" length=\"20\">\r\n                      <%= paymentName %>\r\n                    <\/text>\r\n                    <text align=\"right\" length=\"20\">\r\n                      <%= OB.App.PrintUtils.printAmount(payment.amount) %>\r\n                    <\/text>\r\n                  <\/line>\r\n                  <% } if (payment.gatewayData) { const pinfo=payment.gatewayData; %>\r\n                    <line>\r\n                      <text align=\"left\" length=\"2\"><\/text>\r\n                      <text align=\"left\" length=\"20\">\r\n                        <%= OB.I18N.getLabel('OBPOS_PaymentTran') %>\r\n                      <\/text>\r\n                      <text align=\"left\" length=\"20\">\r\n                        <%= pinfo.transaction %>\r\n                      <\/text>\r\n                    <\/line>\r\n                    <line>\r\n                      <text align=\"left\" length=\"2\"><\/text>\r\n                      <text align=\"left\" length=\"20\">\r\n                        <%= OB.I18N.getLabel('OBPOS_PaymentApproval') %>\r\n                      <\/text>\r\n                      <text align=\"left\" length=\"20\">\r\n                        <%= pinfo.authorization %>\r\n                      <\/text>\r\n                    <\/line>\r\n                    <% if (pinfo.cardmasked) { %>\r\n                      <line>\r\n                        <text align=\"left\" length=\"2\"><\/text>\r\n                        <text align=\"left\" length=\"20\">\r\n                          <%= OB.I18N.getLabel('OBPOS_PaymentAct') %>\r\n                        <\/text>\r\n                        <text align=\"left\" length=\"20\">\r\n                          <%= pinfo.cardmasked %>\r\n                        <\/text>\r\n                      <\/line>\r\n                      <% } %>\r\n                        <% if (pinfo.cardlogo) { %>\r\n                          <line>\r\n                            <text align=\"left\" length=\"2\"><\/text>\r\n                            <text align=\"left\" length=\"20\">\r\n                              <%= OB.I18N.getLabel('OBPOS_PaymentLogo') %>\r\n                            <\/text>\r\n                            <text align=\"left\" length=\"20\">\r\n                              <%= pinfo.cardlogo %>\r\n                            <\/text>\r\n                          <\/line>\r\n                          <% } %>\r\n                            <% } }); %>\r\n                              <% if (ticket.hasbeenpaid==='Y' && ticket.paidOnCredit) { %>\r\n                                <line>\r\n                                  <text align=\"left\" length=\"20\">\r\n                                    <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_paidOnCredit')) %>\r\n                                  <\/text>\r\n                                  <text align=\"right\" length=\"20\">\r\n                                    <%= OB.App.PrintUtils.printAmount(OB.DEC.sub(ticket.grossAmount, ticket.payment)) %>\r\n                                  <\/text>\r\n                                <\/line>\r\n                                <% } %>\r\n\r\n                                  <% const changelabel=OB.App.PrintUtils.getChangeLabelFromTicket(ticket); if\r\n                                    (changelabel) { if (changelabel.length> 34) {\r\n                                    const changesplit = changelabel.split(' + ');\r\n                                    %>\r\n                                    <line>\r\n                                      <text align=\"left\" length=\"7\">\r\n                                        <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_ticketChange')) %>\r\n                                      <\/text>\r\n                                      <text align=\"right\" length=\"35\">\r\n                                        <%= changesplit[0] %>\r\n                                      <\/text>\r\n                                    <\/line>\r\n                                    <% let changeindex; for (changeindex=1; changeindex < changesplit.length;\r\n                                      changeindex++) { %>\r\n                                      <line>\r\n                                        <text align=\"right\" length=\"42\">+ <%= changesplit[changeindex] %> <\/text>\r\n                                      <\/line>\r\n                                      <% } } else { %>\r\n                                        <line>\r\n                                          <text align=\"left\" length=\"7\">\r\n                                            <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_ticketChange')) %>\r\n                                          <\/text>\r\n                                          <text align=\"right\" length=\"35\">\r\n                                            <%= changelabel %>\r\n                                          <\/text>\r\n                                        <\/line>\r\n                                        <% } } %>\r\n\r\n                                          <line><\/line>\r\n                                          <line size=\"1\">\r\n                                            <% if (ticket.payments && ticket.payments.length> 0) { %>\r\n                                              <text align=\"center\" length=\"42\">\r\n                                                <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_tckfooter_paid'))\r\n                                                  %>\r\n                                              <\/text>\r\n                                              <% } else { %>\r\n                                                <text align=\"center\" length=\"42\">\r\n                                                  <%=\r\n                                                    OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_tckfooter_notPaid'))\r\n                                                    %>\r\n                                                <\/text>\r\n                                                <% } %>\r\n                                          <\/line>\r\n                                          <line>\r\n                                            <text align=\"center\" length=\"42\">\r\n                                              <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_tckfooter_line2'))\r\n                                                %>\r\n                                            <\/text>\r\n                                          <\/line>\r\n                                          <line><\/line>\r\n                                          <line>\r\n                                            <text align=\"left\" length=\"12\">\r\n                                              <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_tck_breakdown')) %>\r\n                                            <\/text>\r\n                                            <text align=\"left\" length=\"12\">\r\n                                              <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_tck_base')) %>\r\n                                            <\/text>\r\n                                            <text align=\"left\" length=\"12\">\r\n                                              <%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_tck_TAX')) %>\r\n                                            <\/text>\r\n                                          <\/line>\r\n                                          <line>\r\n                                            <text>------------------------------------------<\/text>\r\n                                          <\/line>\r\n                                          <% let totAmount=0; const taxes=Object.values(ticket.taxes).sort((a, b)=>\r\n                                            a.name.localeCompare(b.name));\r\n                                            taxes.forEach(tax => {\r\n                                            totAmount += tax.amount;\r\n                                            %>\r\n                                            <line>\r\n                                              <text align=\"left\" length=\"12\">\r\n                                                <%= OB.I18N.formatRate(tax.rate) %>\r\n                                              <\/text>\r\n                                              <text align=\"left\" length=\"12\">\r\n                                                <%= OB.App.PrintUtils.printAmount(tax.net) %>\r\n                                              <\/text>\r\n                                              <text align=\"left\" length=\"12\">\r\n                                                <%= OB.App.PrintUtils.printAmount(tax.amount) %>\r\n                                              <\/text>\r\n                                            <\/line>\r\n                                            <% }); %>\r\n                                              <line>\r\n                                                <text>------------------------------------------<\/text>\r\n                                              <\/line>\r\n                                              <line>\r\n                                                <text align=\"left\" length=\"24\">\r\n                                                  <%=\r\n                                                    OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_display_total'))\r\n                                                    %>\r\n                                                <\/text>\r\n                                                <text align=\"left\" length=\"12\">\r\n                                                  <%= OB.App.PrintUtils.printAmount(totAmount) %>\r\n                                                <\/text>\r\n                                              <\/line>\r\n\r\n                                              <line>\r\n                                                <% if (ticket.orderDocumentNo !=='' ) { %>\r\n                                                  <barcode type=\"CODE128\" position=\"left\">\r\n                                                    <%= OB.UTIL.encodeXMLComponent(ticket.orderDocumentNo) %>\r\n                                                  <\/barcode>\r\n                                                  <% } %>\r\n                                              <\/line>\r\n\r\n  <\/ticket>\r\n\r\n<\/output>"
}